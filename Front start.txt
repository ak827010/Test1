ğŸ“Œ Step 1: Install Angular CLI & Create a New Project
1ï¸âƒ£ Install Angular CLI (if not already installed):

sh
Copy
Edit
npm install -g @angular/cli
2ï¸âƒ£ Create a new Angular project:

sh
Copy
Edit
ng new flights-app
It will ask:
Would you like to add Angular routing? â†’ Yes
Which CSS preprocessor to use? â†’ Choose CSS
3ï¸âƒ£ Navigate into the project:

sh
Copy
Edit
cd flights-app
4ï¸âƒ£ Run the application:

sh
Copy
Edit
ng serve
Open your browser and go to http://localhost:4200
âœ… Now you have a working Angular project!

ğŸ“Œ Step 2: Install Required Packages
We'll install some necessary libraries for Bootstrap, HTTP handling, JWT authentication, and routing guards.

sh
Copy
Edit
npm install bootstrap @auth0/angular-jwt
Bootstrap â†’ Used for styling
@auth0/angular-jwt â†’ Used to handle JWT authentication
âœ… Now, configure Bootstrap:
Open angular.json and add Bootstrap CSS under "styles":

json
Copy
Edit
"styles": [
  "node_modules/bootstrap/dist/css/bootstrap.min.css",
  "src/styles.css"
]
ğŸ“Œ Step 3: Plan the Folder Structure
We will structure the project for better scalability.

ruby
Copy
Edit
flights-app/
â”‚â”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ components/        # All UI components (Search, Booking, etc.)
â”‚   â”‚   â”œâ”€â”€ pages/             # Complete pages (Home, Admin Dashboard, etc.)
â”‚   â”‚   â”œâ”€â”€ services/          # API service files (Auth, Booking, etc.)
â”‚   â”‚   â”œâ”€â”€ models/            # Interfaces for data models
â”‚   â”‚   â”œâ”€â”€ guards/            # Auth guards for admin access
â”‚   â”‚   â”œâ”€â”€ app-routing.module.ts  # App Routing
â”‚   â”‚   â”œâ”€â”€ app.module.ts      # Main module
â”‚   â”œâ”€â”€ assets/                # Static assets like images
â”‚   â”œâ”€â”€ styles.css             # Global styles
ğŸ“Œ Step 4: Create Essential Angular Modules & Components
We'll generate components for each page using Angular CLI.

sh
Copy
Edit
ng g c pages/home
ng g c pages/search-flights
ng g c pages/booking
ng g c pages/check-in
ng g c pages/admin-dashboard
ng g c pages/login
âœ… These are the key pages:

Home Page â†’ Displays a welcome message with search options.
Search Flights â†’ Allows users to search for available flights.
Booking Page â†’ Lets users book a flight.
Check-in Page â†’ Allows passengers to check in.
Admin Dashboard â†’ Restricted access for admins to manage flights and cities.
Login Page â†’ Allows the admin to log in.
ğŸ“Œ Step 5: Create Services for API Calls
We'll create separate services to handle API communication.

sh
Copy
Edit
ng g s services/auth
ng g s services/flight
ng g s services/booking
ng g s services/checkin
ng g s services/city
âœ… Services will handle API requests for:

Authentication (auth.service.ts)
Flight Search (flight.service.ts)
Booking (booking.service.ts)
Check-in (checkin.service.ts)
City Management (city.service.ts)
ğŸ“Œ Step 6: Set Up Routing
Modify app-routing.module.ts to define routes for our pages.

ğŸ“Œ src/app/app-routing.module.ts

typescript
Copy
Edit
import { NgModule } from '@angular/core';
import { RouterModule, Routes } from '@angular/router';
import { HomeComponent } from './pages/home/home.component';
import { SearchFlightsComponent } from './pages/search-flights/search-flights.component';
import { BookingComponent } from './pages/booking/booking.component';
import { CheckInComponent } from './pages/check-in/check-in.component';
import { AdminDashboardComponent } from './pages/admin-dashboard/admin-dashboard.component';
import { LoginComponent } from './pages/login/login.component';

const routes: Routes = [
  { path: '', component: HomeComponent },
  { path: 'search-flights', component: SearchFlightsComponent },
  { path: 'booking', component: BookingComponent },
  { path: 'check-in', component: CheckInComponent },
  { path: 'admin', component: AdminDashboardComponent },
  { path: 'login', component: LoginComponent },
];

@NgModule({
  imports: [RouterModule.forRoot(routes)],
  exports: [RouterModule]
})
export class AppRoutingModule { }
âœ… Now, Angular knows how to navigate between pages!

ğŸ“Œ Step 7: Set Up Authentication Handling
Since only admins can log in, we need an Auth Guard.

1ï¸âƒ£ Generate Auth Guard

sh
Copy
Edit
ng g guard guards/auth
2ï¸âƒ£ Modify auth.guard.ts ğŸ“Œ src/app/guards/auth.guard.ts

typescript
Copy
Edit
import { Injectable } from '@angular/core';
import { CanActivate, Router } from '@angular/router';
import { AuthService } from '../services/auth.service';

@Injectable({
  providedIn: 'root'
})
export class AuthGuard implements CanActivate {
  constructor(private authService: AuthService, private router: Router) {}

  canActivate(): boolean {
    if (this.authService.isLoggedIn()) {
      return true;
    } else {
      this.router.navigate(['/login']);
      return false;
    }
  }
}
âœ… Now, protect the admin route!
Modify app-routing.module.ts:

typescript
Copy
Edit
import { AuthGuard } from './guards/auth.guard';

const routes: Routes = [
  { path: 'admin', component: AdminDashboardComponent, canActivate: [AuthGuard] }
];
ğŸ“Œ Step 8: Setup Global Navbar
We need a Navbar so users can navigate between pages.

ğŸ“Œ Generate Navbar Component

sh
Copy
Edit
ng g c components/navbar
ğŸ“Œ Modify navbar.component.html

html
Copy
Edit
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" routerLink="/">FlightsApp</a>
  <div class="collapse navbar-collapse">
    <ul class="navbar-nav">
      <li class="nav-item"><a class="nav-link" routerLink="/">Home</a></li>
      <li class="nav-item"><a class="nav-link" routerLink="/search-flights">Search Flights</a></li>
      <li class="nav-item"><a class="nav-link" routerLink="/check-in">Check-In</a></li>
      <li class="nav-item"><a class="nav-link" routerLink="/admin">Admin Dashboard</a></li>
    </ul>
  </div>
</nav>
âœ… Now, add it to app.component.html

html
Copy
Edit
<app-navbar></app-navbar>
<router-outlet></router-outlet>
ğŸ“Œ Next Steps
ğŸ”¹ We have successfully set up the Angular 19 project!
ğŸ”¹ Now, we can start developing the Login Page first.

Would you like me to generate the Login Page next and integrate it with the backend JWT authentication? ğŸ¯

import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class AuthService {
  constructor() {}

  // âœ… Check if user is logged in
  isLoggedIn(): boolean {
    return !!sessionStorage.getItem('token'); // Returns true if token exists
  }

  // âœ… Save token in session storage
  saveToken(token: string): void {
    sessionStorage.setItem('token', token);
  }

  // âœ… Remove token on logout
  logout(): void {
    sessionStorage.removeItem('token');
  }
}
Login Page Implementation with JWT Authentication
Now, we will create the Login Page and integrate it with the backend authentication service using JWT. Below is the step-by-step process.

ğŸ“ Steps to Implement the Login Page
1ï¸âƒ£ Create the Login Component
Run the following command in your Angular project:

sh
Copy
Edit
ng g c components/login
This will generate the login component inside the components folder.

2ï¸âƒ£ Update login.component.html
Replace the content with the following Bootstrap-styled login form:

html
Copy
Edit
<div class="container d-flex justify-content-center align-items-center vh-100">
  <div class="card p-4 shadow-lg" style="width: 400px;">
    <h3 class="text-center mb-3">Admin Login</h3>
    
    <form (ngSubmit)="onLogin()">
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" [(ngModel)]="email" name="email" required>
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input type="password" class="form-control" id="password" [(ngModel)]="password" name="password" required>
      </div>

      <button type="submit" class="btn btn-primary w-100" [disabled]="isLoading">
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm"></span>
        Login
      </button>
    </form>

    <p class="text-center mt-3">
      <button class="btn btn-link" (click)="continueAsGuest()">Continue as Guest</button>
    </p>

    <p class="text-danger text-center" *ngIf="errorMessage">{{ errorMessage }}</p>
  </div>
</div>
3ï¸âƒ£ Update login.component.ts
Modify the logic to call the backend API for authentication:

typescript
Copy
Edit
import { Component } from '@angular/core';
import { AuthService } from '../../services/auth.service';
import { Router } from '@angular/router';

@Component({
  selector: 'app-login',
  templateUrl: './login.component.html',
  styleUrls: ['./login.component.css']
})
export class LoginComponent {
  email: string = '';
  password: string = '';
  isLoading: boolean = false;
  errorMessage: string = '';

  constructor(private authService: AuthService, private router: Router) {}

  // Login Function
  onLogin() {
    this.isLoading = true;
    this.errorMessage = '';

    this.authService.login(this.email, this.password).subscribe({
      next: (response) => {
        this.isLoading = false;
        this.router.navigate(['/admin-dashboard']); // Redirect after login
      },
      error: (error) => {
        this.isLoading = false;
        this.errorMessage = 'Invalid credentials. Please try again.';
      }
    });
  }

  // Guest Login
  continueAsGuest() {
    this.authService.loginAsGuest();
    this.router.navigate(['/search-flights']); // Redirect to search flights page
  }
}
4ï¸âƒ£ Create the AuthService for Authentication
Run:

sh
Copy
Edit
ng g s services/auth
Then, update auth.service.ts:

typescript
Copy
Edit
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Router } from '@angular/router';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class AuthService {
  private apiUrl = 'http://localhost:5000/api/auth/login'; // Adjust according to your backend

  constructor(private http: HttpClient, private router: Router) {}

  // ğŸ” Login API Call
  login(email: string, password: string): Observable<any> {
    return this.http.post<any>(this.apiUrl, { email, password });
  }

  // âœ… Store Token (session-based)
  saveToken(token: string): void {
    sessionStorage.setItem('token', token);
  }

  // ğŸ” Check if User is Logged In
  isLoggedIn(): boolean {
    return !!sessionStorage.getItem('token');
  }

  // ğŸšª Logout
  logout(): void {
    sessionStorage.removeItem('token');
    this.router.navigate(['/login']);
  }

  // ğŸ­ Guest Login (Hardcoded)
  loginAsGuest(): void {
    sessionStorage.setItem('role', 'guest'); // Store role as guest
  }

  // ğŸ” Check if Admin
  isAdmin(): boolean {
    return sessionStorage.getItem('role') === 'admin';
  }
}
5ï¸âƒ£ Update app.module.ts
Ensure that FormsModule, HttpClientModule, and RouterModule are imported.

typescript
Copy
Edit
import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { AppRoutingModule } from './app-routing.module';
import { AppComponent } from './app.component';
import { HttpClientModule } from '@angular/common/http';
import { FormsModule } from '@angular/forms';
import { LoginComponent } from './components/login/login.component';

@NgModule({
  declarations: [
    AppComponent,
    LoginComponent
  ],
  imports: [
    BrowserModule,
    AppRoutingModule,
    HttpClientModule,
    FormsModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
6ï¸âƒ£ Add Routes in app-routing.module.ts
typescript
Copy
Edit
import { NgModule } from '@angular/core';
import { RouterModule, Routes } from '@angular/router';
import { LoginComponent } from './components/login/login.component';

const routes: Routes = [
  { path: 'login', component: LoginComponent },
  { path: '', redirectTo: '/login', pathMatch: 'full' } // Redirect to login by default
];

@NgModule({
  imports: [RouterModule.forRoot(routes)],
  exports: [RouterModule]
})
export class AppRoutingModule { }
7ï¸âƒ£ Secure Admin Pages Using AuthGuard
Create a guard:

sh
Copy
Edit
ng g guard auth
Modify auth.guard.ts:

typescript
Copy
Edit
import { Injectable } from '@angular/core';
import { CanActivate, Router } from '@angular/router';
import { AuthService } from '../services/auth.service';

@Injectable({
  providedIn: 'root'
})
export class AuthGuard implements CanActivate {
  constructor(private authService: AuthService, private router: Router) {}

  canActivate(): boolean {
    if (this.authService.isLoggedIn()) {
      return true;
    } else {
      this.router.navigate(['/login']);
      return false;
    }
  }
}
Then, protect admin routes in app-routing.module.ts:

typescript
Copy
Edit
import { AuthGuard } from './guards/auth.guard';

const routes: Routes = [
  { path: 'admin-dashboard', component: AdminDashboardComponent, canActivate: [AuthGuard] },
];
ğŸ›  Testing the Login
âœ… Start Backend:
Run your backend API first.

sh
Copy
Edit
dotnet run
âœ… Start Frontend:
sh
Copy
Edit
ng serve
Now, try logging in using:

Valid admin credentials â†’ Redirects to Admin Dashboard
Incorrect credentials â†’ Shows error message
Clicking "Continue as Guest" â†’ Redirects to Search Flights

